<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Interest Rate Comparison</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apply a fallback font and ensure the page is always 100% height */
        html, body {
            height: 100%;
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }
    </style>
</head>
<body class="bg-[#003366] min-h-screen flex flex-col items-center px-[10px] py-[4px]">

    <a href="https://speedofsachi.github.io/FinanceTools/Home.html#" class="absolute top-4 left-4 
        bg-gray-500 hover:bg-gray-600 text-white font-semibold 
        py-2 px-4 rounded-lg shadow-md 
        transition duration-150 ease-in-out z-10">
        Home
    </a>
    <h1 class="text-white text-center text-3xl sm:text-4xl mt-16 mb-6 md:text-6xl mt-16 mb-6 lg:text-[70px] mt-12 mb-6">
        Rent Vs Buy [Beta]
    </h1>

  <form class="w-full max-w-2xl bg-gray-100 text-gray-800 rounded-xl shadow-2xl p-8 md:p-12" onsubmit="return false;">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6">
        <div>
            <label for="HousePrice" class="block text-sm font-medium text-gray-700 mb-1">House Price ($)</label>
            <input type="number" id="HousePrice" step="0.01" value="500000" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="DownPayment" class="block text-sm font-medium text-gray-700 mb-1">Down Payment (%)</label>
            <input type="number" id="DownPayment" step="0.01" value="10" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="MortgageRate" class="block text-sm font-medium text-gray-700 mb-1">Mortgage Rate (%)</label>
            <input type="number" id="MortgageRate" step="0.01" value="4.5" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="Amortization" class="block text-sm font-medium text-gray-700 mb-1">Amortization (years)</label>
            <input type="number" id="Amortization" step="1" value="25" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white">
        </div>

        <div>
            <label for="HouseAppreciation" class="block text-sm font-medium text-gray-700 mb-1">House Appreciation (%)</label>
            <input type="number" id="HouseAppreciation" step="0.01" value="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="UpkeepCost" class="block text-sm font-medium text-gray-700 mb-1">Upkeep Cost (%)</label>
            <input type="number" id="UpkeepCost" step="0.01" value="1" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="PropertyTax" class="block text-sm font-medium text-gray-700 mb-1">PropertyTax (%)</label>
            <input type="number" id="PropertyTax" step="0.01" value="1.5" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="PortfolioReturn" class="block text-sm font-medium text-gray-700 mb-1">Portfolio Return (%)</label>
            <input type="number" id="PortfolioReturn" step="0.01" value="9" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="MonthlyRent" class="block text-sm font-medium text-gray-700 mb-1">Monthly Rent ($)</label>
            <input type="number" id="MonthlyRent" step="0.01" value="1500" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>
        
        <div>
            <label for="RentInflation" class="block text-sm font-medium text-gray-700 mb-1">Rent Inflation (%)</label>
            <input type="number" id="RentInflation" step="0.01" value="2" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div class="md:col-span-2 mt-4">
            <button type="button" id="calculateBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md shadow-lg transition duration-300 transform hover:scale-105">
                Calculate
            </button>
        </div>

    </div>
</form>

   <div id="result" class="mt-12 w-full max-w-4xl grid grid-cols-1 sm:grid-cols-3 gap-y-8 sm:gap-4 text-center">

        <div class="flex flex-col items-center justify-center">
            <h2 class="text-xl font-medium text-gray-300">Networth Renter</h2>
            <p id="NetworthRenter" class="text-4xl font-bold text-white mt-2">$0.00</p>
        </div>

        <div class="flex flex-col items-center justify-center">
            <h2 class="text-xl font-medium text-gray-300">Networth Homeowner</h2>
            <p id="NetworthHomeowner" class="text-4xl font-bold text-white mt-2">0</p>
        </div>

        <div class="flex flex-col items-center justify-center">
            <h2 class="text-xl font-medium text-gray-300">Difference</h2>
            <p id="Difference" class="text-4xl font-bold text-white mt-2">$0.00</p>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            //Input Fields
            let HousePriceEl = document.getElementById('HousePrice');
            let DownPaymentEl = document.getElementById('DownPayment');
            let MortgageRateEl = document.getElementById('MortgageRate'); 
            let AmortizationEl = document.getElementById('Amortization'); 
            let HouseAppreciationEl = document.getElementById('HouseAppreciation'); 
            let UpkeepCostEl = document.getElementById('UpkeepCost'); 
            let PropertyTaxEl = document.getElementById('PropertyTax'); 
            let PortfolioReturnEl = document.getElementById('PortfolioReturn'); 
            let MonthlyRentEl = document.getElementById('MonthlyRent');
            let RentInflationEl = document.getElementById('RentInflation'); 
            let calculateBtn = document.getElementById('calculateBtn');
            
            //Output Fields
            let NetworthRenterEl = document.getElementById('NetworthRenter');
            let NetworthHomeownerEl = document.getElementById('NetworthHomeowner');
            let DifferenceEl = document.getElementById('Difference');

            // Calculates the payment, total periods, and total interest.

            function calculateMortgageMetrics() {
                // Input values - standardize
                let HousePrice = parseFloat(HousePriceEl.value) || 0;
                let DownPayment = (parseFloat(DownPaymentEl.value) || 0) / 100;
                let MortgageRate = (parseFloat(MortgageRateEl.value) || 0) / 100;
                let AmortizationYears = (parseFloat(AmortizationEl.value) || 0); 
                let HouseAppreciation = (parseFloat(HouseAppreciationEl.value) || 0) / 100;
                let UpkeepCost = (parseFloat(UpkeepCostEl.value) || 0) / 100;
                let PropertyTax = (parseFloat(PropertyTaxEl.value) || 0) / 100;
                let PortfolioReturn = (parseFloat(PortfolioReturnEl.value) || 0) / 100;
                let MonthlyRent = parseFloat(MonthlyRentEl.value) || 0;
                let RentInflation = (parseFloat(RentInflationEl.value) || 0) / 100;
                
                // Variables
                let NetworthHouse_t = 0;  //networth from house related value/expenses only
                let NetworthRent_t = 0; //networth from renting related expenses only
                let NetworthHomeowner_t = 0; //total networth
                let NetworthRenter_t = 0;  //total networth
                let PortfolioRenter_t = 0;
                let PortfolioRenterGain_t = 0;
                let PortfolioHomeowner_t = 0;
                let PortfolioHomeownerGain_t = 0;
                let Difference_t = 0;
                let HousePrice_t = 0;
                let Debt_t = 0;
                let HouseFees_t = 0;
                let Rent_t = 0;
                let CashflowRent_t = 0;
                let CashflowHouse_t = 0;
                let CashflowDifference_t = 0;
                let CashflowTotal_t = 0;
                let DownPaymentAmount = DownPayment * HousePrice
                let DebtAmount = HousePrice - DownPaymentAmount
                let totalPeriods = Math.floor(AmortizationYears * 12);
                let periodicMortgageRate = MortgageRate / 12;
                let periodicHouseAppreciation = (1 + HouseAppreciation)**(1/12) - 1;
                let periodicUpkeepCost = (1 + UpkeepCost)**(1/12) - 1;
                let periodicPropertyTax = (1 + PropertyTax)**(1/12) - 1;
                let periodicPortfolioReturn = (1 + PortfolioReturn)**(1/12) - 1;
                let periodicRentInflation = (1 + RentInflation)**(1/12) - 1;
                let periodicMortgage = DebtAmount* periodicMortgageRate / (1 - (1 + periodicMortgageRate)**(-totalPeriods))

                // Calculate Networth
               
                // ----- Time zero -----
                // Homeowner
                Debt_t = DebtAmount  
                HousePrice_t = HousePrice
                HouseFees_t = 0
                CashflowHouse_t = -DownPaymentAmount - HouseFees_t
                NetworthHouse_t = DownPaymentAmount  - HouseFees_t
                // Renter
                Rent_t = MonthlyRent
                CashflowRent_t = -Rent_t
                NetworthRent_t = NetworthRent_t + CashflowRent_t
                // Portfolio return & equalize cashflows             
                CashflowDifference_t = CashflowRent_t - CashflowHouse_t  //positive CashflowDifference means homeowner paid made than renter, and viceversa
                if (CashflowDifference_t >= 0) {
                   CashflowTotal_t = CashflowTotal_t + CashflowHouse_t
                   PortfolioRenterGain_t = CashflowDifference_t
                } else {
                   CashflowTotal_t = CashflowTotal_t + CashflowRent_t
                   PortfolioHomeownerGain_t = -CashflowDifference_t
                }
                PortfolioHomeowner_t =  PortfolioHomeowner_t + PortfolioHomeownerGain_t
                PortfolioRenter_t =  PortfolioRenter_t + PortfolioRenterGain_t
                // Final Networth
                NetworthHomeowner_t = NetworthHouse_t + PortfolioHomeowner_t
                NetworthRenter_t = NetworthRent_t + PortfolioRenter_t
                Difference_t = Math.abs(NetworthRenter_t - NetworthHomeowner_t)

                // ----- Time 1 to n -----
                for (let i = 1; i <= totalPeriods; i++) {
                   // Homeowner
                   Debt_t = Debt_t*(1 + periodicMortgageRate) - periodicMortgage
                   HousePrice_t = HousePrice_t*(1 + periodicHouseAppreciation)
                   HouseFees_t = HousePrice_t*(periodicUpkeepCost + periodicPropertyTax)
                   CashflowHouse_t = -periodicMortgage - HouseFees_t
                   NetworthHouse_t = HousePrice_t - Debt_t - HouseFees_t
                   // Renter
                   Rent_t = Rent_t*(1 + periodicRentInflation)
                   CashflowRent_t = -Rent_t
                   NetworthRent_t  = NetworthRent_t + CashflowRent_t
                   // Portfolio return & equalize cashflows             
                   CashflowDifference_t = CashflowRent_t - CashflowHouse_t  //positive CashflowDifference means homeowner paid made than renter, and viceversa
                   if (CashflowDifference_t >= 0) {
                      CashflowTotal_t = CashflowTotal_t + CashflowHouse_t
                      PortfolioRenterGain_t = PortfolioRenter_t*periodicPortfolioReturn + CashflowDifference_t
                      PortfolioHomeownerGain_t = PortfolioHomeowner_t*periodicPortfolioReturn
                   } else {
                      CashflowTotal_t = CashflowTotal_t + CashflowRent_t
                      PortfolioRenterGain_t = PortfolioRenter_t*periodicPortfolioReturn
                      PortfolioHomeownerGain_t = PortfolioHomeowner_t*periodicPortfolioReturn - CashflowDifference_t
                   }

                   PortfolioHomeowner_t =  PortfolioHomeowner_t + PortfolioHomeownerGain_t
                   PortfolioRenter_t =  PortfolioRenter_t + PortfolioRenterGain_t
                   // Final Networth
                   NetworthHomeowner_t = NetworthHouse_t + PortfolioHomeowner_t
                   NetworthRenter_t = NetworthRent_t + PortfolioRenter_t
                   Difference_t = Math.abs(NetworthRenter_t - NetworthHomeowner_t)
                }

                // test code
                if (totalPeriods === 0) {
                } else if (totalPeriods === 0) {
                } else {
                }

                // --- Display Results ---
                // 1. Networth Homeowner
                NetworthRenterEl.textContent = NetworthRenter_t.toLocaleString('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                 });

                // 2. Networth Homeowner
                NetworthHomeownerEl.textContent = NetworthHomeowner_t.toLocaleString('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                 });

                // 3. Difference
                DifferenceEl.textContent = Difference_t.toLocaleString('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                 });
            }

            // --- Event Listeners ---
            calculateBtn.addEventListener('click', calculateMortgageMetrics);

        });
    </script>

</body>
</html>