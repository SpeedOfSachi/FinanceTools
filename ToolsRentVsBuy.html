<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Interest Rate Comparison</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apply a fallback font and ensure the page is always 100% height */
        html, body {
            height: 100%;
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }
    </style>
</head>
<body class="bg-[#003366] min-h-screen flex flex-col items-center px-[10px] py-[4px]">

    <a href="https://speedofsachi.github.io/FinanceTools/Home.html#" class="absolute top-4 left-4 
        bg-gray-500 hover:bg-gray-600 text-white font-semibold 
        py-2 px-4 rounded-lg shadow-md 
        transition duration-150 ease-in-out z-10">
        Home
    </a>
    <h1 class="text-white text-center text-3xl sm:text-4xl mt-16 mb-6 md:text-6xl mt-16 mb-6 lg:text-[70px] mt-12 mb-6">
        Rent Vs Buy [IN PROGRESS]
    </h1>

  <form class="w-full max-w-2xl bg-gray-100 text-gray-800 rounded-xl shadow-2xl p-8 md:p-12" onsubmit="return false;">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6">
        <div>
            <label for="HousePrice" class="block text-sm font-medium text-gray-700 mb-1">House Price ($)</label>
            <input type="number" id="HousePrice" step="0.01" value="500000" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="DownPayment" class="block text-sm font-medium text-gray-700 mb-1">Down Payment (%)</label>
            <input type="number" id="DownPayment" step="0.01" value="10" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="MortgageRate" class="block text-sm font-medium text-gray-700 mb-1">Mortgage Rate (%)</label>
            <input type="number" id="MortgageRate" step="0.01" value="4.5" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="Amortization" class="block text-sm font-medium text-gray-700 mb-1">Amortization (years)</label>
            <input type="number" id="Amortization" step="1" value="25" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white">
        </div>

        <div>
            <label for="HouseAppreciation" class="block text-sm font-medium text-gray-700 mb-1">House Appreciation (%)</label>
            <input type="number" id="HouseAppreciation" step="0.01" value="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="UpkeepCost" class="block text-sm font-medium text-gray-700 mb-1">Upkeep Cost (%)</label>
            <input type="number" id="UpkeepCost" step="0.01" value="1" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="PropertyTax" class="block text-sm font-medium text-gray-700 mb-1">PropertyTax (%)</label>
            <input type="number" id="PropertyTax" step="0.01" value="1.5" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="PortfolioReturn" class="block text-sm font-medium text-gray-700 mb-1">Portfolio Return (%)</label>
            <input type="number" id="PortfolioReturn" step="0.01" value="9" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div>
            <label for="MonthlyRent" class="block text-sm font-medium text-gray-700 mb-1">Monthly Rent ($)</label>
            <input type="number" id="MonthlyRent" step="0.01" value="1500" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>
        
        <div>
            <label for="RentInflation" class="block text-sm font-medium text-gray-700 mb-1">Rent Inflation (%)</label>
            <input type="number" id="RentInflation" step="0.01" value="2" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div class="md:col-span-2 mt-4">
            <button type="button" id="calculateBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md shadow-lg transition duration-300 transform hover:scale-105">
                Calculate
            </button>
        </div>

    </div>
</form>

   <div id="result" class="mt-12 w-full max-w-4xl grid grid-cols-1 sm:grid-cols-3 gap-y-8 sm:gap-4 text-center">

        <div class="flex flex-col items-center justify-center">
            <h2 class="text-xl font-medium text-gray-300">Savings per Payment</h2>
            <p id="periodPaymentSavingsOutput" class="text-4xl font-bold text-white mt-2">$0.00</p>
        </div>

        <div class="flex flex-col items-center justify-center">
            <h2 class="text-xl font-medium text-gray-300">Total PV Savings</h2>
            <p id="totalSavingsPvOutput" class="text-4xl font-bold text-white mt-2">0</p>
        </div>

        <div class="flex flex-col items-center justify-center">
            <h2 class="text-xl font-medium text-gray-300">Total Interest Savings</h2>
            <p id="totalInterestSavingsOutput" class="text-4xl font-bold text-white mt-2">$0.00</p>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            let HousePriceEl = document.getElementById('HousePrice');
            let DownPaymentEl = document.getElementById('DownPayment');
            let MortgageRateEl = document.getElementById('MortgageRate'); 
            let AmortizationEl = document.getElementById('Amortization'); 
            let HouseAppreciationEl = document.getElementById('HouseAppreciation'); 
            let UpkeepCostEl = document.getElementById('UpkeepCost'); 
            let PropertyTaxEl = document.getElementById('PropertyTax'); 
            let PortfolioReturnEl = document.getElementById('PortfolioReturn'); 
            let MonthlyRentEl = document.getElementById('MonthlyRent');
            let RentInflationEl = document.getElementById('RentInflation'); 
            let calculateBtn = document.getElementById('calculateBtn');
            
            // Updated output element IDs
            let totalSavingsPvOutputEl = document.getElementById('totalSavingsPvOutput'); // New
            let periodPaymentSavingsOutputEl = document.getElementById('periodPaymentSavingsOutput'); // Renamed/Replaced
            let totalInterestSavingsOutputEl = document.getElementById('totalInterestSavingsOutput'); // New

            /**
             * Calculates the payment, total periods, and total interest.
             */
            function calculateMortgageMetrics() {
                // Get and parse all values
                let balance = parseFloat(balanceEl.value) || 0; 
                let interestRate1 = (parseFloat(interestRate1El.value) || 0) / 100;
                let interestRate2 = (parseFloat(interestRate2El.value) || 0) / 100;
                let frequency = paymentFrequencyEl.value;
                let frequencyAnn = 0;
                let amortizationYears = parseFloat(amortizationEl.value) || 0; 

                // Determine annual payment frequency
                if (frequency === "monthly") {
                   frequencyAnn = 12;
                } else if (frequency === "semi-monthly") {
                   frequencyAnn = 24;
                } else if (frequency === "bi-weekly") {
                   frequencyAnn = 26;
                } else if (frequency === "weekly") {
                   frequencyAnn = 52;
                } else {
                   // Defaulting to monthly
                   frequencyAnn = 12; 
                }
                
                // Mortgage Variables
                let totalPeriods = Math.floor(amortizationYears * frequencyAnn);
                let periodicRate1 = interestRate1 / frequencyAnn;
                let periodicRate2 = interestRate2 / frequencyAnn;
                let periodicPayment1 = 0;
                let periodicPayment2 = 0;
                let totalInterest1 = 0;
                let totalInterest2 = 0;
                let periodicPaymentSavings = 0;
                let totalInterestSavings = 0;
                let totalSavingsPV = 0;

                // Calculate Mortgage 1
                if (totalPeriods === 0) {
                   periodicPayment1 = balance
                   totalInterest1 = 0
                } else if (periodicRate1 === 0) {
                   periodicPayment1 = balance / totalPeriods
                   totalInterest1 = 0
                } else {
                   periodicPayment1 = balance* periodicRate1 / (1 - (1 + periodicRate1)**(-totalPeriods))
                   totalInterest1 = periodicPayment1 * totalPeriods - balance
                }

                // Calculate Mortgage 2
                if (totalPeriods === 0) {
                   periodicPayment2 = balance
                   totalInterest2 = 0
                } else if (periodicRate2 === 0) {
                   periodicPayment2 = balance / totalPeriods
                   totalInterest2 = 0
                } else {
                   periodicPayment2 = balance* periodicRate2 / (1 - (1 + periodicRate2)**(-totalPeriods))
                   totalInterest2 = periodicPayment2 * totalPeriods - balance
                }

                // Calculate Savings
                totalInterestSavings = Math.abs(totalInterest1 - totalInterest2)
                periodicPaymentSavings = Math.abs(periodicPayment1 - periodicPayment2)
                if (interestRate1 > interestRate2) {
                   if (interestRate2 === 0) {
                      totalSavingsPV = periodicPayment1 * totalPeriods - balance
                   } else {
                      totalSavingsPV = periodicPayment1 * (1 - (1 + periodicRate2)**(-totalPeriods)) / periodicRate2 - balance
                   }
                } else if (interestRate2 > interestRate1) {
                   if (interestRate1 === 0) {
                      totalSavingsPV = periodicPayment2 * totalPeriods - balance
                   } else {
                      totalSavingsPV = periodicPayment2 * (1 - (1 + periodicRate1)**(-totalPeriods)) / periodicRate1 - balance
                   }
                } else {
                   totalSavingsPV = 0
                }

                // --- Display Results ---

                // 1. Period Payment Savings
                periodPaymentSavingsOutputEl.textContent = periodicPaymentSavings.toLocaleString('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                 });

                // 2. Total Interest Savings
                totalInterestSavingsOutputEl.textContent = totalInterestSavings.toLocaleString('en-US', {
                   style: 'currency',
                   currency: 'USD',
                   minimumFractionDigits: 2,
                   maximumFractionDigits: 2
                });

                // 3. Total Interest (Currency)
                totalSavingsPvOutputEl.textContent = totalSavingsPV.toLocaleString('en-US', {
                   style: 'currency',
                   currency: 'USD',
                   minimumFractionDigits: 2,
                   maximumFractionDigits: 2
                });
            }

            // --- Event Listeners ---
            calculateBtn.addEventListener('click', calculateMortgageMetrics);

        });
    </script>

</body>
</html>